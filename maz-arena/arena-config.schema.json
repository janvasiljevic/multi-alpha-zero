{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ArenaConfigList",
  "type": "object",
  "properties": {
    "configs": {
      "description": "List of arena configurations.",
      "type": "array",
      "items": {
        "$ref": "#/$defs/ArenaConfig"
      }
    },
    "sessions_per_gpu": {
      "type": "integer",
      "format": "uint",
      "minimum": 0
    }
  },
  "required": [
    "sessions_per_gpu",
    "configs"
  ],
  "$defs": {
    "ArenaConfig": {
      "type": "object",
      "properties": {
        "config_unique_name": {
          "description": "Name of the configuration.",
          "type": "string"
        },
        "game": {
          "description": "The game to be played in the arena.\n Specifics such as the mapper and board size will be inferred from models themselves.",
          "$ref": "#/$defs/ConfigGame"
        },
        "games_per_matchup": {
          "description": "Number of games to be played per matchup between three models.",
          "type": "integer",
          "format": "uint",
          "minimum": 0
        },
        "initial_elo": {
          "description": "Initial Elo rating for models.",
          "type": "number",
          "format": "double",
          "default": 600.0
        },
        "mcts_rollouts_per_move": {
          "description": "Number of rollouts per move for MCTS-based models.",
          "type": "integer",
          "format": "uint",
          "default": 200,
          "minimum": 0
        },
        "out_file": {
          "description": "Output file, must end with .csv",
          "type": "string"
        },
        "players": {
          "description": "List of model file paths to be used in the arena.",
          "type": "array",
          "items": {
            "$ref": "#/$defs/PlayerConfig"
          }
        }
      },
      "additionalProperties": false,
      "required": [
        "config_unique_name",
        "out_file",
        "game",
        "players",
        "games_per_matchup"
      ]
    },
    "ConfigGame": {
      "type": "string",
      "enum": [
        "Hex",
        "Chess",
        "Chess2Player"
      ]
    },
    "PlayerConfig": {
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "AlphaZeroPlayer"
            },
            "onnx_path": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "onnx_path"
          ]
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "Random"
            },
            "unique_name": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "unique_name"
          ]
        },
        {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "const": "Mcts"
            },
            "num_of_playouts": {
              "type": "integer",
              "format": "uint",
              "minimum": 0
            },
            "unique_name": {
              "type": "string"
            }
          },
          "required": [
            "type",
            "unique_name",
            "num_of_playouts"
          ]
        }
      ]
    }
  }
}